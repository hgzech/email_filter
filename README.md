# email_filter

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Overview

``` mermaid
  graph TD;
      A-->B;
      A-->C;
      B-->D;
      C-->D;
```

``` mermaid
graph TD
    Start[Fetch New Emails] --> CheckAddress[Check Address]
    Start[Fetch New Emails] --> Update[Update trusted list based on new sent]
    CheckAddress[Check Address] -->|"trusted\n(previous interaction)"| Inbox[Inbox]
    CheckAddress[Check Address] -->|not trusted| CheckDomain[Check Domain]
    %% Domain Checks
    CheckDomain -->|"trusted \n(previous interaction,\nknown university,\nor whitelist)"| IsNewsletter1[Check if Newsletter]
    CheckDomain -->|untrusted| Occasionally[Read Occasionally]
    %% Second Newsletter Checks
    IsNewsletter1 -->|"newsletter\n(unsubscribe in email text,\nblacklist)"| Occasionally[Read Occasionally]
    IsNewsletter1 -->|not Newsletter| Inbox[Inbox]
    %% Labels for Inbox Moves
    style Inbox fill:#9f9,stroke:#333,stroke-width:2px
    %% Labels for Folder Moves
    style Occasionally fill:#ff9,stroke:#333,stroke-width:2px
```

## Install

(pip install will be implemented soon)

``` sh
pip install email_filter
```

## How to use

``` python
USERNAME = os.environ.get("EXCHANGE_USER")
PASSWORD = os.environ.get("EXCHANGE_PASSWORD")

# Usage example
email_client = EmailClient("msx.tu-dresden.de", 993, USERNAME, PASSWORD)
storage = DataStorage("../data")

junk_checker = JunkChecker(email_client, storage)
junk_checker.update_whitelists()
bad_emails = junk_checker.filter_inbox()
email_client.logout()
```
