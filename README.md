# email_filter

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Overview

This email filter works by extracting “trusted domains” from addresses
that you’ve previously sent emails too. Based on these trusted domains,
emails from your inbox are filtered.

In future updates, the filter should also distinguish between trusted
addresses and trusted domains, to only allow some (e.g., non newsletter)
emails from trusted domains. The full idea of the filter can be seen
below:

``` mermaid
graph TD
    Start[Fetch New Emails] --> CheckAddress[Check Address]
    Start[Fetch New Emails] --> Update[Update trusted list based on new sent]
    CheckAddress[Check Address] -->|"trusted\n(previous interaction)"| Inbox[Inbox]
    CheckAddress[Check Address] -->|not trusted| CheckDomain[Check Domain]
    %% Domain Checks
    CheckDomain -->|"trusted \n(previous interaction,\nknown university,\nor whitelist)"| IsNewsletter1[Check if Newsletter]
    CheckDomain -->|untrusted| Occasionally[Read Occasionally]
    %% Second Newsletter Checks
    IsNewsletter1 -->|"newsletter\n(unsubscribe in email text,\nblacklist)"| Occasionally[Read Occasionally]
    IsNewsletter1 -->|not Newsletter| Inbox[Inbox]
    %% Labels for Inbox Moves
    style Inbox fill:#9f9,stroke:#333,stroke-width:2px
    %% Labels for Folder Moves
    style Occasionally fill:#ff9,stroke:#333,stroke-width:2px
```

## Install

(pip install will be implemented soon)

``` sh
pip install email_filter
```

## How to use

``` python
# Setup
USERNAME = os.environ.get("EXCHANGE_USER") # Set this to your exchange user
PASSWORD = os.environ.get("EXCHANGE_PASSWORD") # Set this to your exchange password
email_client = EmailClient("msx.tu-dresden.de", 993, USERNAME, PASSWORD) # Set this to your exchange server
storage = DataStorage("../data") # Set this to the folder where you want you whitelist files stored

# Filter
junk_checker = JunkChecker(email_client, storage)
junk_checker.update_whitelists() # Updating trusted addresses and domains based on your "Sent Items" folder
bad_emails = junk_checker.filter_inbox() # Filtering inbox based on trusted domains
email_client.logout()
```
